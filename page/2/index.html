<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="长毛大好的根据地">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="长毛大好的根据地">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="长毛大好的根据地">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>长毛大好的根据地</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?75c8a36e7d13eec4a16cf804bf7e3db2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">长毛大好的根据地</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">编程 量化投资</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/06/PEG/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/06/PEG/" itemprop="url">PEG因子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-06T14:37:31+08:00">
                2017-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>将所有股票按PEG等分成十组回测2010年以来的表现。净值如下表：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-12-31</td>
<td>1.087869</td>
<td>1.089425</td>
<td>1.092704</td>
<td>1.079064</td>
<td>1.081334</td>
<td>1.062273</td>
<td>1.096844</td>
<td>1.116984</td>
<td>1.035751</td>
<td>1.043409</td>
</tr>
<tr>
<td>2011-12-31</td>
<td>0.934964</td>
<td>0.957662</td>
<td>0.934127</td>
<td>0.933988</td>
<td>0.924037</td>
<td>0.896026</td>
<td>0.922301</td>
<td>0.907039</td>
<td>0.851795</td>
<td>0.803168</td>
</tr>
<tr>
<td>2012-12-31</td>
<td>1.044772</td>
<td>1.031354</td>
<td>0.986349</td>
<td>1.021512</td>
<td>0.971028</td>
<td>0.918684</td>
<td>0.930464</td>
<td>0.884619</td>
<td>0.849660</td>
<td>0.789087</td>
</tr>
<tr>
<td>2013-12-31</td>
<td>1.141532</td>
<td>1.162580</td>
<td>1.120673</td>
<td>1.182005</td>
<td>1.185366</td>
<td>1.114595</td>
<td>1.091641</td>
<td>1.076601</td>
<td>0.966610</td>
<td>0.920120</td>
</tr>
<tr>
<td>2014-12-31</td>
<td>1.461165</td>
<td>1.512454</td>
<td>1.434704</td>
<td>1.489590</td>
<td>1.433823</td>
<td>1.341085</td>
<td>1.343816</td>
<td>1.304468</td>
<td>1.196706</td>
<td>1.139385</td>
</tr>
<tr>
<td>2015-12-31</td>
<td>1.972708</td>
<td>2.125198</td>
<td>2.091300</td>
<td>2.169410</td>
<td>2.007275</td>
<td>2.010058</td>
<td>1.944351</td>
<td>1.771353</td>
<td>1.641794</td>
<td>1.616815</td>
</tr>
<tr>
<td>2016-12-31</td>
<td>1.968145</td>
<td>2.092056</td>
<td>2.067014</td>
<td>2.179450</td>
<td>1.946036</td>
<td>1.973676</td>
<td>1.821275</td>
<td>1.677829</td>
<td>1.577180</td>
<td>1.485020</td>
</tr>
<tr>
<td>2017-12-31</td>
<td>2.118332</td>
<td>2.164580</td>
<td>2.074477</td>
<td>2.197451</td>
<td>1.915643</td>
<td>1.952230</td>
<td>1.721748</td>
<td>1.572580</td>
<td>1.471519</td>
<td>1.358905</td>
</tr>
</tbody>
</table>
<p>每年的回报如下：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2011</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2011</td>
<td>-0.140554</td>
<td>-0.120947</td>
<td>-0.145123</td>
<td>-0.134446</td>
<td>-0.145466</td>
<td>-0.156501</td>
<td>-0.159132</td>
<td>-0.187957</td>
<td>-0.177607</td>
<td>-0.230247</td>
</tr>
<tr>
<td>2012</td>
<td>0.117446</td>
<td>0.076951</td>
<td>0.055904</td>
<td>0.093709</td>
<td>0.050854</td>
<td>0.025287</td>
<td>0.008851</td>
<td>-0.024718</td>
<td>-0.002506</td>
<td>-0.017531</td>
</tr>
<tr>
<td>2013</td>
<td>0.092613</td>
<td>0.127236</td>
<td>0.136183</td>
<td>0.157113</td>
<td>0.220732</td>
<td>0.213252</td>
<td>0.173223</td>
<td>0.217022</td>
<td>0.137644</td>
<td>0.166056</td>
</tr>
<tr>
<td>2014</td>
<td>0.280003</td>
<td>0.300946</td>
<td>0.280217</td>
<td>0.260223</td>
<td>0.209604</td>
<td>0.203204</td>
<td>0.231005</td>
<td>0.211654</td>
<td>0.238044</td>
<td>0.238301</td>
</tr>
<tr>
<td>2015</td>
<td>0.350093</td>
<td>0.405132</td>
<td>0.457653</td>
<td>0.456381</td>
<td>0.399946</td>
<td>0.498829</td>
<td>0.446888</td>
<td>0.357912</td>
<td>0.371928</td>
<td>0.419024</td>
</tr>
<tr>
<td>2016</td>
<td>-0.002313</td>
<td>-0.015595</td>
<td>-0.011613</td>
<td>0.004628</td>
<td>-0.030509</td>
<td>-0.018100</td>
<td>-0.063299</td>
<td>-0.052798</td>
<td>-0.039356</td>
<td>-0.081515</td>
</tr>
<tr>
<td>2017</td>
<td>0.076309</td>
<td>0.034666</td>
<td>0.003611</td>
<td>0.008259</td>
<td>-0.015618</td>
<td>-0.010866</td>
<td>-0.054647</td>
<td>-0.062730</td>
<td>-0.066994</td>
<td>-0.084925</td>
</tr>
</tbody>
</table>
<p>可以发现PEG与回报线性负相关。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/06/PCF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/06/PCF/" itemprop="url">PCF因子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-06T14:03:43+08:00">
                2017-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>将所有股票按PCF等分成十组回测2010年以来的表现。净值如下表：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-12-31</td>
<td>1.086341</td>
<td>1.115406</td>
<td>1.124475</td>
<td>1.032795</td>
<td>1.000034</td>
<td>1.041880</td>
<td>1.144902</td>
<td>1.110968</td>
<td>1.126887</td>
<td>1.109661</td>
</tr>
<tr>
<td>2011-12-31</td>
<td>0.758770</td>
<td>0.772391</td>
<td>0.814754</td>
<td>0.772826</td>
<td>0.684226</td>
<td>0.759714</td>
<td>0.813444</td>
<td>0.782327</td>
<td>0.771003</td>
<td>0.780526</td>
</tr>
<tr>
<td>2012-12-31</td>
<td>0.793051</td>
<td>0.773328</td>
<td>0.852778</td>
<td>0.777959</td>
<td>0.713306</td>
<td>0.760859</td>
<td>0.834624</td>
<td>0.785808</td>
<td>0.788577</td>
<td>0.799565</td>
</tr>
<tr>
<td>2013-12-31</td>
<td>0.998963</td>
<td>1.043570</td>
<td>1.075219</td>
<td>1.029943</td>
<td>0.902860</td>
<td>0.886220</td>
<td>0.989532</td>
<td>0.914069</td>
<td>0.974560</td>
<td>0.989530</td>
</tr>
<tr>
<td>2014-12-31</td>
<td>1.411457</td>
<td>1.504646</td>
<td>1.592346</td>
<td>1.524295</td>
<td>1.401316</td>
<td>1.495713</td>
<td>1.480506</td>
<td>1.337123</td>
<td>1.357883</td>
<td>1.371814</td>
</tr>
<tr>
<td>2015-12-31</td>
<td>2.659077</td>
<td>2.910087</td>
<td>2.925584</td>
<td>3.001670</td>
<td>2.541015</td>
<td>2.545456</td>
<td>2.456165</td>
<td>2.279813</td>
<td>2.394990</td>
<td>2.571808</td>
</tr>
<tr>
<td>2016-12-31</td>
<td>2.336056</td>
<td>2.514191</td>
<td>2.656911</td>
<td>2.803551</td>
<td>2.398428</td>
<td>2.347339</td>
<td>2.179939</td>
<td>1.982501</td>
<td>2.036969</td>
<td>2.215460</td>
</tr>
<tr>
<td>2017-12-31</td>
<td>2.137368</td>
<td>2.261879</td>
<td>2.419029</td>
<td>2.776996</td>
<td>2.410072</td>
<td>2.186883</td>
<td>2.057776</td>
<td>1.816333</td>
<td>1.874521</td>
<td>2.013008</td>
</tr>
</tbody>
</table>
<p>每年的回报如下：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2011</td>
<td>-0.301536</td>
<td>-0.307525</td>
<td>-0.275436</td>
<td>-0.251714</td>
<td>-0.315797</td>
<td>-0.270824</td>
<td>-0.289508</td>
<td>-0.295815</td>
<td>-0.315812</td>
<td>-0.296609</td>
</tr>
<tr>
<td>2012</td>
<td>0.045180</td>
<td>0.001213</td>
<td>0.046670</td>
<td>0.006642</td>
<td>0.042501</td>
<td>0.001508</td>
<td>0.026038</td>
<td>0.004450</td>
<td>0.022795</td>
<td>0.024392</td>
</tr>
<tr>
<td>2013</td>
<td>0.259644</td>
<td>0.349452</td>
<td>0.260843</td>
<td>0.323904</td>
<td>0.265740</td>
<td>0.164762</td>
<td>0.185602</td>
<td>0.163223</td>
<td>0.235846</td>
<td>0.237586</td>
</tr>
<tr>
<td>2014</td>
<td>0.412923</td>
<td>0.441826</td>
<td>0.480951</td>
<td>0.479980</td>
<td>0.552086</td>
<td>0.687744</td>
<td>0.496167</td>
<td>0.462824</td>
<td>0.393329</td>
<td>0.386329</td>
</tr>
<tr>
<td>2015</td>
<td>0.883923</td>
<td>0.934068</td>
<td>0.837279</td>
<td>0.969218</td>
<td>0.813306</td>
<td>0.701835</td>
<td>0.659004</td>
<td>0.705015</td>
<td>0.763767</td>
<td>0.874751</td>
</tr>
<tr>
<td>2016</td>
<td>-0.121478</td>
<td>-0.136043</td>
<td>-0.091836</td>
<td>-0.066003</td>
<td>-0.056114</td>
<td>-0.077832</td>
<td>-0.112462</td>
<td>-0.130411</td>
<td>-0.149487</td>
<td>-0.138559</td>
</tr>
<tr>
<td>2017</td>
<td>-0.085053</td>
<td>-0.100355</td>
<td>-0.089533</td>
<td>-0.009472</td>
<td>0.004855</td>
<td>-0.068357</td>
<td>-0.056040</td>
<td>-0.083817</td>
<td>-0.079750</td>
<td>-0.091382</td>
</tr>
</tbody>
</table>
<p>未发现回报与PCF有明显的线性关系，但PCF较低的五个分组回报高于较高的五个分组。PCF较低的五个分组中，PCF最低的分组收益较低。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/06/PS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/06/PS/" itemprop="url">PS因子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-06T10:41:58+08:00">
                2017-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>将所有股票按PS等分成十组回测2010年以来的表现。净值如下表：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-12-31</td>
<td>1.020889</td>
<td>1.112341</td>
<td>1.107545</td>
<td>1.167572</td>
<td>1.123266</td>
<td>1.113750</td>
<td>1.101951</td>
<td>1.048178</td>
<td>1.171153</td>
<td>1.001875</td>
</tr>
<tr>
<td>2011-12-31</td>
<td>0.779256</td>
<td>0.791757</td>
<td>0.762403</td>
<td>0.840818</td>
<td>0.796079</td>
<td>0.771444</td>
<td>0.761334</td>
<td>0.733632</td>
<td>0.826342</td>
<td>0.692351</td>
</tr>
<tr>
<td>2012-12-31</td>
<td>0.792535</td>
<td>0.790449</td>
<td>0.806160</td>
<td>0.855152</td>
<td>0.812459</td>
<td>0.767912</td>
<td>0.765340</td>
<td>0.732208</td>
<td>0.850107</td>
<td>0.717194</td>
</tr>
<tr>
<td>2013-12-31</td>
<td>0.873340</td>
<td>0.862205</td>
<td>0.964960</td>
<td>1.039396</td>
<td>1.020664</td>
<td>0.996411</td>
<td>0.971292</td>
<td>0.967278</td>
<td>1.180156</td>
<td>0.995670</td>
</tr>
<tr>
<td>2014-12-31</td>
<td>1.471868</td>
<td>1.350340</td>
<td>1.532915</td>
<td>1.518168</td>
<td>1.470535</td>
<td>1.489815</td>
<td>1.352479</td>
<td>1.368417</td>
<td>1.620799</td>
<td>1.350903</td>
</tr>
<tr>
<td>2015-12-31</td>
<td>2.241077</td>
<td>2.087234</td>
<td>2.715448</td>
<td>2.710866</td>
<td>2.694836</td>
<td>2.628722</td>
<td>2.628464</td>
<td>2.625608</td>
<td>3.117548</td>
<td>2.555546</td>
</tr>
<tr>
<td>2016-12-31</td>
<td>2.224428</td>
<td>1.948392</td>
<td>2.474233</td>
<td>2.496916</td>
<td>2.465756</td>
<td>2.392499</td>
<td>2.319398</td>
<td>2.168727</td>
<td>2.510236</td>
<td>2.032286</td>
</tr>
<tr>
<td>2017-12-31</td>
<td>2.419705</td>
<td>2.009926</td>
<td>2.472943</td>
<td>2.407695</td>
<td>2.291465</td>
<td>2.188655</td>
<td>2.122526</td>
<td>1.943864</td>
<td>2.147668</td>
<td>1.624417</td>
</tr>
</tbody>
</table>
<p>每年的回报如下：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2011</td>
<td>-0.236689</td>
<td>-0.288207</td>
<td>-0.311628</td>
<td>-0.279858</td>
<td>-0.291282</td>
<td>-0.307346</td>
<td>-0.309104</td>
<td>-0.300088</td>
<td>-0.294420</td>
<td>-0.308944</td>
</tr>
<tr>
<td>2012</td>
<td>0.017040</td>
<td>-0.001653</td>
<td>0.057393</td>
<td>0.017048</td>
<td>0.020575</td>
<td>-0.004578</td>
<td>0.005262</td>
<td>-0.001942</td>
<td>0.028760</td>
<td>0.035882</td>
</tr>
<tr>
<td>2013</td>
<td>0.101958</td>
<td>0.090779</td>
<td>0.196983</td>
<td>0.215452</td>
<td>0.256265</td>
<td>0.297559</td>
<td>0.269098</td>
<td>0.321043</td>
<td>0.388243</td>
<td>0.388286</td>
</tr>
<tr>
<td>2014</td>
<td>0.685333</td>
<td>0.566147</td>
<td>0.588578</td>
<td>0.460626</td>
<td>0.440764</td>
<td>0.495181</td>
<td>0.392454</td>
<td>0.414709</td>
<td>0.373377</td>
<td>0.356777</td>
</tr>
<tr>
<td>2015</td>
<td>0.522607</td>
<td>0.545710</td>
<td>0.771428</td>
<td>0.785616</td>
<td>0.832554</td>
<td>0.764462</td>
<td>0.943441</td>
<td>0.918719</td>
<td>0.923464</td>
<td>0.891732</td>
</tr>
<tr>
<td>2016</td>
<td>-0.007429</td>
<td>-0.066519</td>
<td>-0.088831</td>
<td>-0.078923</td>
<td>-0.085007</td>
<td>-0.089862</td>
<td>-0.117584</td>
<td>-0.174010</td>
<td>-0.194804</td>
<td>-0.204755</td>
</tr>
<tr>
<td>2017</td>
<td>0.087787</td>
<td>0.031581</td>
<td>-0.000521</td>
<td>-0.035732</td>
<td>-0.070685</td>
<td>-0.085201</td>
<td>-0.084880</td>
<td>-0.103684</td>
<td>-0.144436</td>
<td>-0.200695</td>
</tr>
</tbody>
</table>
<p>未发现回报与PS有明显的线性关系，但PS最低分组的回报明显高于其它分组。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/05/PE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/05/PE/" itemprop="url">PE因子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-05T12:26:43+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>将所有股票按PE（未排除负值）等分成十组回测2010年以来的表现。净值如下表：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-12-31</td>
<td>1.103594</td>
<td>1.042240</td>
<td>0.970173</td>
<td>1.018402</td>
<td>1.164351</td>
<td>1.189454</td>
<td>1.102618</td>
<td>1.141581</td>
<td>1.066815</td>
<td>1.121400</td>
</tr>
<tr>
<td>2011-12-31</td>
<td>0.811557</td>
<td>0.800276</td>
<td>0.716327</td>
<td>0.716622</td>
<td>0.825102</td>
<td>0.832769</td>
<td>0.768389</td>
<td>0.767624</td>
<td>0.708640</td>
<td>0.777161</td>
</tr>
<tr>
<td>2012-12-31</td>
<td>0.829923</td>
<td>0.893295</td>
<td>0.742631</td>
<td>0.713365</td>
<td>0.849159</td>
<td>0.857625</td>
<td>0.756912</td>
<td>0.748447</td>
<td>0.678493</td>
<td>0.791373</td>
</tr>
<tr>
<td>2013-12-31</td>
<td>1.013853</td>
<td>0.928670</td>
<td>0.860674</td>
<td>0.897891</td>
<td>1.105963</td>
<td>1.092207</td>
<td>1.049340</td>
<td>1.023176</td>
<td>0.899905</td>
<td>0.929080</td>
</tr>
<tr>
<td>2014-12-31</td>
<td>1.531894</td>
<td>1.515540</td>
<td>1.287108</td>
<td>1.292005</td>
<td>1.576642</td>
<td>1.542732</td>
<td>1.476471</td>
<td>1.504480</td>
<td>1.307250</td>
<td>1.409481</td>
</tr>
<tr>
<td>2015-12-31</td>
<td>2.939829</td>
<td>2.386519</td>
<td>2.093601</td>
<td>2.148117</td>
<td>2.750002</td>
<td>2.837170</td>
<td>2.826979</td>
<td>2.984670</td>
<td>2.494795</td>
<td>2.556893</td>
</tr>
<tr>
<td>2016-12-31</td>
<td>2.701098</td>
<td>2.378912</td>
<td>1.925599</td>
<td>1.970407</td>
<td>2.562582</td>
<td>2.502897</td>
<td>2.368854</td>
<td>2.401408</td>
<td>2.088768</td>
<td>2.172508</td>
</tr>
<tr>
<td>2017-12-31</td>
<td>2.420598</td>
<td>2.640326</td>
<td>1.999790</td>
<td>1.962651</td>
<td>2.443068</td>
<td>2.281054</td>
<td>2.057174</td>
<td>2.084370</td>
<td>1.791400</td>
<td>1.825012</td>
</tr>
</tbody>
</table>
<p>每年的回报如下：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2011</td>
<td>-0.264624</td>
<td>-0.232157</td>
<td>-0.261650</td>
<td>-0.296326</td>
<td>-0.291363</td>
<td>-0.299873</td>
<td>-0.303123</td>
<td>-0.327578</td>
<td>-0.335742</td>
<td>-0.306972</td>
</tr>
<tr>
<td>2012</td>
<td>0.022630</td>
<td>0.116233</td>
<td>0.036721</td>
<td>-0.004546</td>
<td>0.029156</td>
<td>0.029848</td>
<td>-0.014937</td>
<td>-0.024983</td>
<td>-0.042542</td>
<td>0.018287</td>
</tr>
<tr>
<td>2013</td>
<td>0.221623</td>
<td>0.039601</td>
<td>0.158952</td>
<td>0.258670</td>
<td>0.302422</td>
<td>0.273525</td>
<td>0.386344</td>
<td>0.367066</td>
<td>0.326330</td>
<td>0.174010</td>
</tr>
<tr>
<td>2014</td>
<td>0.510963</td>
<td>0.631946</td>
<td>0.495466</td>
<td>0.438933</td>
<td>0.425583</td>
<td>0.412491</td>
<td>0.407047</td>
<td>0.470401</td>
<td>0.452652</td>
<td>0.517072</td>
</tr>
<tr>
<td>2015</td>
<td>0.919082</td>
<td>0.574699</td>
<td>0.626592</td>
<td>0.662623</td>
<td>0.744215</td>
<td>0.839056</td>
<td>0.914686</td>
<td>0.983856</td>
<td>0.908431</td>
<td>0.814067</td>
</tr>
<tr>
<td>2016</td>
<td>-0.081206</td>
<td>-0.003188</td>
<td>-0.080246</td>
<td>-0.082728</td>
<td>-0.068153</td>
<td>-0.117819</td>
<td>-0.162054</td>
<td>-0.195419</td>
<td>-0.162750</td>
<td>-0.150333</td>
</tr>
<tr>
<td>2017</td>
<td>-0.103847</td>
<td>0.109888</td>
<td>0.038529</td>
<td>-0.003936</td>
<td>-0.046638</td>
<td>-0.088635</td>
<td>-0.131574</td>
<td>-0.132022</td>
<td>-0.142365</td>
<td>-0.159951</td>
</tr>
</tbody>
</table>
<p>未发现回报与PE有明显的线性关系。</p>
<p>如果将负值排除，回测净值如下表：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-12-31</td>
<td>0.965498</td>
<td>1.020494</td>
<td>1.055900</td>
<td>1.129586</td>
<td>1.188351</td>
<td>1.101523</td>
<td>1.147111</td>
<td>1.110957</td>
<td>1.057407</td>
<td>1.090404</td>
</tr>
<tr>
<td>2011-12-31</td>
<td>0.760423</td>
<td>0.748804</td>
<td>0.779942</td>
<td>0.816642</td>
<td>0.863731</td>
<td>0.780588</td>
<td>0.842189</td>
<td>0.756304</td>
<td>0.710313</td>
<td>0.780177</td>
</tr>
<tr>
<td>2012-12-31</td>
<td>0.852762</td>
<td>0.755929</td>
<td>0.785521</td>
<td>0.837290</td>
<td>0.867738</td>
<td>0.801543</td>
<td>0.846119</td>
<td>0.743134</td>
<td>0.669730</td>
<td>0.807027</td>
</tr>
<tr>
<td>2013-12-31</td>
<td>0.870735</td>
<td>0.854051</td>
<td>0.965473</td>
<td>1.031082</td>
<td>1.081571</td>
<td>1.040408</td>
<td>1.133126</td>
<td>0.996737</td>
<td>0.836107</td>
<td>0.926953</td>
</tr>
<tr>
<td>2014-12-31</td>
<td>1.376869</td>
<td>1.202055</td>
<td>1.343252</td>
<td>1.425136</td>
<td>1.450185</td>
<td>1.413087</td>
<td>1.564318</td>
<td>1.486368</td>
<td>1.162858</td>
<td>1.387156</td>
</tr>
<tr>
<td>2015-12-31</td>
<td>1.953594</td>
<td>1.897876</td>
<td>2.164968</td>
<td>2.344067</td>
<td>2.571203</td>
<td>2.517956</td>
<td>3.016384</td>
<td>2.784259</td>
<td>2.057215</td>
<td>2.507663</td>
</tr>
<tr>
<td>2016-12-31</td>
<td>1.841835</td>
<td>1.798346</td>
<td>2.011415</td>
<td>2.236237</td>
<td>2.330793</td>
<td>2.190459</td>
<td>2.598379</td>
<td>2.467942</td>
<td>1.731715</td>
<td>2.164362</td>
</tr>
<tr>
<td>2017-12-31</td>
<td>2.124131</td>
<td>1.876566</td>
<td>2.017318</td>
<td>2.168163</td>
<td>2.163001</td>
<td>2.010408</td>
<td>2.251743</td>
<td>2.147142</td>
<td>1.497436</td>
<td>1.844280</td>
</tr>
</tbody>
</table>
<p>每年的回报如下：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2011</td>
<td>-0.212403</td>
<td>-0.266234</td>
<td>-0.261349</td>
<td>-0.277043</td>
<td>-0.273168</td>
<td>-0.291355</td>
<td>-0.265817</td>
<td>-0.319232</td>
<td>-0.328250</td>
<td>-0.284506</td>
</tr>
<tr>
<td>2012</td>
<td>0.121431</td>
<td>0.009515</td>
<td>0.007153</td>
<td>0.025284</td>
<td>0.004638</td>
<td>0.026844</td>
<td>0.004667</td>
<td>-0.017413</td>
<td>-0.057134</td>
<td>0.034416</td>
</tr>
<tr>
<td>2013</td>
<td>0.021076</td>
<td>0.129804</td>
<td>0.229086</td>
<td>0.231452</td>
<td>0.246426</td>
<td>0.298008</td>
<td>0.339204</td>
<td>0.341261</td>
<td>0.248424</td>
<td>0.148601</td>
</tr>
<tr>
<td>2014</td>
<td>0.581273</td>
<td>0.407474</td>
<td>0.391288</td>
<td>0.382175</td>
<td>0.340814</td>
<td>0.358204</td>
<td>0.380533</td>
<td>0.491234</td>
<td>0.390801</td>
<td>0.496469</td>
</tr>
<tr>
<td>2015</td>
<td>0.418867</td>
<td>0.578860</td>
<td>0.611737</td>
<td>0.644803</td>
<td>0.773017</td>
<td>0.781883</td>
<td>0.928242</td>
<td>0.873196</td>
<td>0.769103</td>
<td>0.807773</td>
</tr>
<tr>
<td>2016</td>
<td>-0.057207</td>
<td>-0.052443</td>
<td>-0.070927</td>
<td>-0.046002</td>
<td>-0.093501</td>
<td>-0.130064</td>
<td>-0.138578</td>
<td>-0.113609</td>
<td>-0.158224</td>
<td>-0.136901</td>
</tr>
<tr>
<td>2017</td>
<td>0.153269</td>
<td>0.043496</td>
<td>0.002935</td>
<td>-0.030441</td>
<td>-0.071989</td>
<td>-0.082198</td>
<td>-0.133405</td>
<td>-0.129987</td>
<td>-0.135287</td>
<td>-0.147888</td>
</tr>
</tbody>
</table>
<p>与未排除负值结论相同，未发现回报与PE有明显的线性关系。但最高两个分位组收益最低。排除PE负值并不能带来更高的收益。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/05/PB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/05/PB/" itemprop="url">PB因子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-05T09:26:43+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>将所有股票按PB等分成十组回测2010年以来的表现。净值如下表：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-12-31</td>
<td>0.935048</td>
<td>0.992028</td>
<td>1.047531</td>
<td>1.137119</td>
<td>1.134727</td>
<td>1.148972</td>
<td>1.073403</td>
<td>1.140800</td>
<td>1.150780</td>
<td>1.172636</td>
</tr>
<tr>
<td>2011-12-31</td>
<td>0.774328</td>
<td>0.761198</td>
<td>0.742111</td>
<td>0.792461</td>
<td>0.786317</td>
<td>0.805854</td>
<td>0.730919</td>
<td>0.797496</td>
<td>0.756645</td>
<td>0.781588</td>
</tr>
<tr>
<td>2012-12-31</td>
<td>0.871203</td>
<td>0.817382</td>
<td>0.761379</td>
<td>0.797996</td>
<td>0.826802</td>
<td>0.779171</td>
<td>0.705521</td>
<td>0.736173</td>
<td>0.749302</td>
<td>0.815934</td>
</tr>
<tr>
<td>2013-12-31</td>
<td>0.948905</td>
<td>0.954411</td>
<td>0.931784</td>
<td>1.037862</td>
<td>1.010391</td>
<td>0.987635</td>
<td>0.941238</td>
<td>0.960335</td>
<td>0.961221</td>
<td>1.038174</td>
</tr>
<tr>
<td>2014-12-31</td>
<td>1.718782</td>
<td>1.562023</td>
<td>1.454215</td>
<td>1.557806</td>
<td>1.526853</td>
<td>1.437498</td>
<td>1.297561</td>
<td>1.354655</td>
<td>1.209104</td>
<td>1.360611</td>
</tr>
<tr>
<td>2015-12-31</td>
<td>2.499001</td>
<td>2.620232</td>
<td>2.536155</td>
<td>2.819126</td>
<td>2.906039</td>
<td>2.819524</td>
<td>2.482989</td>
<td>2.473216</td>
<td>2.245709</td>
<td>2.388202</td>
</tr>
<tr>
<td>2016-12-31</td>
<td>2.502783</td>
<td>2.527353</td>
<td>2.377274</td>
<td>2.613918</td>
<td>2.526500</td>
<td>2.591852</td>
<td>2.207999</td>
<td>2.052108</td>
<td>1.800651</td>
<td>1.834715</td>
</tr>
<tr>
<td>2017-12-31</td>
<td>2.848849</td>
<td>2.599882</td>
<td>2.300030</td>
<td>2.447094</td>
<td>2.378751</td>
<td>2.374627</td>
<td>2.081457</td>
<td>1.816690</td>
<td>1.477437</td>
<td>1.533019</td>
</tr>
</tbody>
</table>
<p>每年的回报如下：</p>
<table>
<thead>
<tr>
<th>年度</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2011</td>
<td>-0.171884</td>
<td>-0.232686</td>
<td>-0.291562</td>
<td>-0.303097</td>
<td>-0.307043</td>
<td>-0.298631</td>
<td>-0.319064</td>
<td>-0.300933</td>
<td>-0.342494</td>
<td>-0.333478</td>
</tr>
<tr>
<td>2012</td>
<td>0.125108</td>
<td>0.073811</td>
<td>0.025963</td>
<td>0.006984</td>
<td>0.051487</td>
<td>-0.033111</td>
<td>-0.034748</td>
<td>-0.076894</td>
<td>-0.009705</td>
<td>0.043944</td>
</tr>
<tr>
<td>2013</td>
<td>0.089189</td>
<td>0.167643</td>
<td>0.223812</td>
<td>0.300585</td>
<td>0.222046</td>
<td>0.267547</td>
<td>0.334104</td>
<td>0.304497</td>
<td>0.282821</td>
<td>0.272375</td>
</tr>
<tr>
<td>2014</td>
<td>0.811332</td>
<td>0.636635</td>
<td>0.560679</td>
<td>0.500977</td>
<td>0.511151</td>
<td>0.455495</td>
<td>0.378568</td>
<td>0.410606</td>
<td>0.257883</td>
<td>0.310582</td>
</tr>
<tr>
<td>2015</td>
<td>0.453937</td>
<td>0.677460</td>
<td>0.744002</td>
<td>0.809677</td>
<td>0.903287</td>
<td>0.961410</td>
<td>0.913583</td>
<td>0.825717</td>
<td>0.857334</td>
<td>0.755242</td>
</tr>
<tr>
<td>2016</td>
<td>0.001513</td>
<td>-0.035447</td>
<td>-0.062646</td>
<td>-0.072791</td>
<td>-0.130604</td>
<td>-0.080748</td>
<td>-0.110750</td>
<td>-0.170267</td>
<td>-0.198181</td>
<td>-0.231759</td>
</tr>
<tr>
<td>2017</td>
<td>0.138272</td>
<td>0.028698</td>
<td>-0.032493</td>
<td>-0.063822</td>
<td>-0.058480</td>
<td>-0.083811</td>
<td>-0.057311</td>
<td>-0.114721</td>
<td>-0.179498</td>
<td>-0.164438</td>
</tr>
</tbody>
</table>
<p>可以发现低PB分组无论是总回报还是稳定性都优于高PB分组。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/12/BigDrop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/12/BigDrop/" itemprop="url">单日大跌后怎么办</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-12T16:52:59+08:00">
                2017-08-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2017年8月11日上证下跌1.63%，深证下跌1.81%。股市单日大跌后怎么办？卖出止损还是买入超低？历史数据也许可以给我们一些参考。通过在<a href="https://www.joinquant.com/" target="_blank" rel="external">聚宽</a>平台对单日下跌2%以上的交易日进行统计，看看多少交易日可以收复失地，以下是代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> math</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> talib</div><div class="line"><span class="keyword">import</span> dateutil</div><div class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</div><div class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> *</div><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="keyword">from</span> kuanke.user_space_api <span class="keyword">import</span> *</div><div class="line"><span class="keyword">except</span>:</div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">from</span> jqdata <span class="keyword">import</span> *</div><div class="line"></div><div class="line">pd.set_option(<span class="string">'display.notebook_repr_html'</span>, <span class="keyword">False</span>)</div><div class="line">pd.set_option(<span class="string">'display.max_rows'</span>, <span class="number">9999</span>)</div><div class="line">pd.set_option(<span class="string">'precision'</span>, <span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">back</span><span class="params">(closes)</span>:</span></div><div class="line">    back_index = []</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(closes)):</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, len(closes)):</div><div class="line">            <span class="keyword">if</span> closes[j] &gt; closes[i]:</div><div class="line">                back_index.append(j)</div><div class="line">                <span class="keyword">break</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            back_index.append(<span class="keyword">None</span>)</div><div class="line">    <span class="keyword">return</span> back_index</div><div class="line"></div><div class="line"></div><div class="line">df = get_price(<span class="string">'399001.XSHE'</span>, count = <span class="number">4800</span>, end_date = <span class="string">'2017-8-12'</span>, fields=[<span class="string">'close'</span>])</div><div class="line">df[<span class="string">'ret'</span>] = df.pct_change()</div><div class="line">df.dropna(inplace=<span class="keyword">True</span>)</div><div class="line">df[<span class="string">'drop'</span>] = df[<span class="string">'ret'</span>] &lt; <span class="number">-0.02</span></div><div class="line">df[<span class="string">'above_date'</span>] = df[[<span class="string">'close'</span>]].apply(back)</div><div class="line"></div><div class="line">indexes = [int(i) <span class="keyword">if</span> <span class="keyword">not</span> math.isnan(i) <span class="keyword">else</span> <span class="keyword">None</span> <span class="keyword">for</span> i <span class="keyword">in</span> df[<span class="string">'above_date'</span>].get_values()]</div><div class="line">df[<span class="string">'back_date'</span>] = [df.index[i] <span class="keyword">if</span> i <span class="keyword">else</span> <span class="keyword">None</span> <span class="keyword">for</span> i <span class="keyword">in</span> indexes]</div><div class="line">df[<span class="string">'back_days'</span>] = df[<span class="string">'back_date'</span>] - df.index</div><div class="line">df[df[<span class="string">'drop'</span>]][<span class="string">'back_days'</span>].value_counts() / len(df[df[<span class="string">'drop'</span>]].index)</div></pre></td></tr></table></figure>
<p>结果如下：</p>
<table>
<thead>
<tr>
<th>天数</th>
<th>概率</th>
</tr>
</thead>
<tbody>
<tr>
<td>1天</td>
<td>0.519</td>
</tr>
<tr>
<td>3天</td>
<td>0.089</td>
</tr>
<tr>
<td>2天</td>
<td>0.061</td>
</tr>
<tr>
<td>4天</td>
<td>0.048</td>
</tr>
<tr>
<td>5天</td>
<td>0.029</td>
</tr>
<tr>
<td>6天</td>
<td>0.022</td>
</tr>
<tr>
<td>10天</td>
<td>0.016</td>
</tr>
<tr>
<td>7天</td>
<td>0.016</td>
</tr>
<tr>
<td>22天</td>
<td>0.013</td>
</tr>
<tr>
<td>8天</td>
<td>0.013</td>
</tr>
<tr>
<td>9天</td>
<td>0.010</td>
</tr>
<tr>
<td>12天</td>
<td>0.010</td>
</tr>
<tr>
<td>15天</td>
<td>0.006</td>
</tr>
<tr>
<td>16天</td>
<td>0.006</td>
</tr>
<tr>
<td>27天</td>
<td>0.006</td>
</tr>
<tr>
<td>17天</td>
<td>0.006</td>
</tr>
<tr>
<td>39天</td>
<td>0.003</td>
</tr>
<tr>
<td>2634天</td>
<td>0.003</td>
</tr>
<tr>
<td>25天</td>
<td>0.003</td>
</tr>
<tr>
<td>239天</td>
<td>0.003</td>
</tr>
<tr>
<td>56天</td>
<td>0.003</td>
</tr>
<tr>
<td>67天</td>
<td>0.003</td>
</tr>
<tr>
<td>11天</td>
<td>0.003</td>
</tr>
<tr>
<td>2606天</td>
<td>0.003</td>
</tr>
<tr>
<td>50天</td>
<td>0.003</td>
</tr>
<tr>
<td>104天</td>
<td>0.003</td>
</tr>
<tr>
<td>943天</td>
<td>0.003</td>
</tr>
<tr>
<td>45天</td>
<td>0.003</td>
</tr>
<tr>
<td>537天</td>
<td>0.003</td>
</tr>
<tr>
<td>31天</td>
<td>0.003</td>
</tr>
<tr>
<td>114天</td>
<td>0.003</td>
</tr>
<tr>
<td>365天</td>
<td>0.003</td>
</tr>
<tr>
<td>356天</td>
<td>0.003</td>
</tr>
<tr>
<td>158天</td>
<td>0.003</td>
</tr>
<tr>
<td>20天</td>
<td>0.003</td>
</tr>
<tr>
<td>68天</td>
<td>0.003</td>
</tr>
<tr>
<td>192天</td>
<td>0.003</td>
</tr>
<tr>
<td>40天</td>
<td>0.003</td>
</tr>
<tr>
<td>102天</td>
<td>0.003</td>
</tr>
<tr>
<td>43天</td>
<td>0.003</td>
</tr>
<tr>
<td>60天</td>
<td>0.003</td>
</tr>
<tr>
<td>2596天</td>
<td>0.003</td>
</tr>
<tr>
<td>86天</td>
<td>0.003</td>
</tr>
<tr>
<td>18天</td>
<td>0.003</td>
</tr>
<tr>
<td>49天</td>
<td>0.003</td>
</tr>
<tr>
<td>173天</td>
<td>0.003</td>
</tr>
<tr>
<td>128天</td>
<td>0.003</td>
</tr>
<tr>
<td>21天</td>
<td>0.003</td>
</tr>
<tr>
<td>83天</td>
<td>0.003</td>
</tr>
<tr>
<td>634天</td>
<td>0.003</td>
</tr>
<tr>
<td>410天</td>
<td>0.003</td>
</tr>
<tr>
<td>76天</td>
<td>0.003</td>
</tr>
</tbody>
</table>
<p>有数据的交易日总数3063天，其中314天下跌2%以上。也就是10.2%的交易日会下跌2%以上，平均一个月两天。单日大跌后，次日就收复失地的占51.9%，五个交易内收复失地的占74.6%。所以在上升和震荡趋势中，单日大跌完全没有必要恐慌，反而应该低吸。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/11/QuarterStat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/11/QuarterStat/" itemprop="url">股市的按季度回报统计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-11T12:30:45+08:00">
                2017-08-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一年中哪个季度的回报最高？以下是在<a href="https://www.joinquant.com/" target="_blank" rel="external">聚宽</a>平台进行验证的代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> math</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> talib</div><div class="line"><span class="keyword">import</span> dateutil</div><div class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</div><div class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> *</div><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="keyword">from</span> kuanke.user_space_api <span class="keyword">import</span> *</div><div class="line"><span class="keyword">except</span>:</div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">from</span> jqdata <span class="keyword">import</span> *</div><div class="line"></div><div class="line">pd.set_option(<span class="string">'display.notebook_repr_html'</span>, <span class="keyword">False</span>)</div><div class="line">pd.set_option(<span class="string">'display.max_rows'</span>, <span class="number">9999</span>)</div><div class="line">pd.set_option(<span class="string">'precision'</span>, <span class="number">3</span>)</div><div class="line">pd.set_option(<span class="string">'display.float_format'</span>, <span class="string">'&#123;:.2f&#125;'</span>.format)</div><div class="line"></div><div class="line">indexes = [</div><div class="line">    <span class="string">'000001.XSHG'</span>,   <span class="comment">#上证指数</span></div><div class="line">    <span class="string">'399001.XSHE'</span>,   <span class="comment">#深成指</span></div><div class="line">    <span class="string">'399005.XSHE'</span>,   <span class="comment">#中小板指</span></div><div class="line">    <span class="string">'399102.XSHE'</span>,   <span class="comment">#创业板综合指数</span></div><div class="line">    <span class="string">'000905.XSHG'</span>,   <span class="comment">#中证500</span></div><div class="line">    <span class="string">'000015.XSHG'</span>,   <span class="comment">#红利指数</span></div><div class="line">    <span class="string">'399932.XSHE'</span>,   <span class="comment">#中证消费</span></div><div class="line">    <span class="string">'399933.XSHE'</span>,   <span class="comment">#中证医药</span></div><div class="line">    <span class="string">'399396.XSHE'</span>,   <span class="comment">#国证食品</span></div><div class="line">    <span class="string">'399610.XSHE'</span>,   <span class="comment">#TMT50</span></div><div class="line">]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_indexes_display_name</span><span class="params">(indexes)</span>:</span></div><div class="line">    all_indexes = get_all_securities([<span class="string">'index'</span>])</div><div class="line"></div><div class="line">    <span class="keyword">return</span> all_indexes.loc[indexes][<span class="string">'display_name'</span>]</div><div class="line"></div><div class="line">index_names = get_indexes_display_name(indexes)</div><div class="line">prices = get_price(indexes, count = <span class="number">4800</span>, end_date = <span class="string">'2017-8-11'</span>, fields=[<span class="string">'close'</span>])</div><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> indexes:</div><div class="line">    closes = prices[<span class="string">'close'</span>][index]</div><div class="line">    closes_quarterly = closes.asfreq(<span class="string">'Q'</span>, method=<span class="string">'ffill'</span>)</div><div class="line"></div><div class="line">    return_quarterly = closes_quarterly.pct_change() * <span class="number">100</span></div><div class="line">    return_quarterly.dropna(inplace=<span class="keyword">True</span>)</div><div class="line"></div><div class="line">    quarterly_stat = pd.DataFrame()</div><div class="line">    return_quarterly_group = return_quarterly.groupby([<span class="keyword">lambda</span> x: x.month])</div><div class="line">    return_quarterly_stat = return_quarterly_group.agg(</div><div class="line">         &#123;<span class="string">'count'</span>: <span class="string">'count'</span>, <span class="string">'min'</span>:<span class="string">'min'</span>,<span class="string">'max'</span>:<span class="string">'max'</span>, <span class="string">'mean'</span>:<span class="string">'mean'</span>, <span class="string">'positive'</span>: <span class="keyword">lambda</span> values: sum(x&gt;<span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> values)&#125;)</div><div class="line">    return_quarterly_stat[<span class="string">'positive_pct'</span>] = return_quarterly_stat[<span class="string">'positive'</span>] / return_quarterly_stat[<span class="string">'count'</span>] * <span class="number">100</span></div><div class="line">    <span class="keyword">del</span> return_quarterly_stat[<span class="string">'positive'</span>]</div><div class="line">    return_quarterly_stat[<span class="string">'index'</span>] = index</div><div class="line">    return_quarterly_stat[<span class="string">'index_name'</span>] = index_names[index]</div><div class="line"></div><div class="line">    return_quarterly_stat.set_index([<span class="string">'index'</span>], append=<span class="keyword">True</span>, inplace=<span class="keyword">True</span>)</div><div class="line">    return_quarterly_stat = return_quarterly_stat[[<span class="string">'index_name'</span>, <span class="string">'count'</span>, <span class="string">'mean'</span>, <span class="string">'min'</span>, <span class="string">'max'</span>, <span class="string">'positive_pct'</span>]]</div><div class="line">    <span class="keyword">print</span> return_quarterly_stat</div></pre></td></tr></table></figure>
<p>结果如下：</p>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>2.37</td>
<td>-34.00</td>
<td>30.34</td>
<td>58.33</td>
</tr>
<tr>
<td>2</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>1.04</td>
<td>-22.86</td>
<td>28.80</td>
<td>38.46</td>
</tr>
<tr>
<td>3</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>1.99</td>
<td>-28.63</td>
<td>45.32</td>
<td>58.33</td>
</tr>
<tr>
<td>4</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>8.86</td>
<td>-20.62</td>
<td>52.67</td>
<td>66.67</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>4.43</td>
<td>-24.85</td>
<td>38.49</td>
<td>58.33</td>
</tr>
<tr>
<td>2</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>2.06</td>
<td>-29.55</td>
<td>46.76</td>
<td>61.54</td>
</tr>
<tr>
<td>3</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>1.94</td>
<td>-30.34</td>
<td>50.36</td>
<td>58.33</td>
</tr>
<tr>
<td>4</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>9.11</td>
<td>-14.20</td>
<td>53.63</td>
<td>50.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>7.17</td>
<td>-18.22</td>
<td>46.60</td>
<td>66.67</td>
</tr>
<tr>
<td>2</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>1.35</td>
<td>-16.28</td>
<td>16.44</td>
<td>66.67</td>
</tr>
<tr>
<td>3</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>-0.46</td>
<td>-26.57</td>
<td>29.74</td>
<td>44.44</td>
</tr>
<tr>
<td>4</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>3.65</td>
<td>-13.92</td>
<td>26.94</td>
<td>44.44</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>5.38</td>
<td>-19.31</td>
<td>57.81</td>
<td>42.86</td>
</tr>
<tr>
<td>2</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>6.61</td>
<td>-15.11</td>
<td>30.95</td>
<td>71.43</td>
</tr>
<tr>
<td>3</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>6</td>
<td>0.91</td>
<td>-28.13</td>
<td>32.24</td>
<td>33.33</td>
</tr>
<tr>
<td>4</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>6.40</td>
<td>-8.33</td>
<td>39.11</td>
<td>57.14</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>6.87</td>
<td>-19.19</td>
<td>50.26</td>
<td>80.00</td>
</tr>
<tr>
<td>2</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>-0.45</td>
<td>-30.42</td>
<td>22.79</td>
<td>45.45</td>
</tr>
<tr>
<td>3</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>3.68</td>
<td>-31.24</td>
<td>41.78</td>
<td>50.00</td>
</tr>
<tr>
<td>4</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>4.35</td>
<td>-15.30</td>
<td>31.90</td>
<td>50.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>5.16</td>
<td>-32.25</td>
<td>39.04</td>
<td>66.67</td>
</tr>
<tr>
<td>2</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>0.14</td>
<td>-27.89</td>
<td>27.42</td>
<td>46.15</td>
</tr>
<tr>
<td>3</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>1.95</td>
<td>-30.56</td>
<td>53.99</td>
<td>50.00</td>
</tr>
<tr>
<td>4</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>9.00</td>
<td>-24.43</td>
<td>52.91</td>
<td>58.33</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>1.35</td>
<td>-8.41</td>
<td>21.61</td>
<td>37.50</td>
</tr>
<tr>
<td>2</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>2.16</td>
<td>-13.58</td>
<td>19.42</td>
<td>50.00</td>
</tr>
<tr>
<td>3</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>7</td>
<td>3.70</td>
<td>-25.50</td>
<td>31.34</td>
<td>57.14</td>
</tr>
<tr>
<td>4</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>5.80</td>
<td>-8.53</td>
<td>30.05</td>
<td>62.50</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>2.88</td>
<td>-17.29</td>
<td>29.93</td>
<td>50.00</td>
</tr>
<tr>
<td>2</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>2.15</td>
<td>-10.81</td>
<td>19.52</td>
<td>50.00</td>
</tr>
<tr>
<td>3</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>7</td>
<td>4.23</td>
<td>-23.89</td>
<td>30.52</td>
<td>57.14</td>
</tr>
<tr>
<td>4</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>5.03</td>
<td>-7.99</td>
<td>26.97</td>
<td>62.50</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>1.31</td>
<td>-7.98</td>
<td>14.47</td>
<td>40.00</td>
</tr>
<tr>
<td>2</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>6.71</td>
<td>-5.65</td>
<td>23.94</td>
<td>60.00</td>
</tr>
<tr>
<td>3</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>4</td>
<td>-1.22</td>
<td>-26.58</td>
<td>13.23</td>
<td>75.00</td>
</tr>
<tr>
<td>4</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>4</td>
<td>7.32</td>
<td>-4.72</td>
<td>18.27</td>
<td>75.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（季度）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>7.25</td>
<td>-19.23</td>
<td>51.25</td>
<td>57.14</td>
</tr>
<tr>
<td>2</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>4.99</td>
<td>-7.01</td>
<td>19.02</td>
<td>85.71</td>
</tr>
<tr>
<td>3</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>6</td>
<td>-3.52</td>
<td>-28.96</td>
<td>23.29</td>
<td>33.33</td>
</tr>
<tr>
<td>4</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>6</td>
<td>0.56</td>
<td>-14.02</td>
<td>24.34</td>
<td>50.00</td>
</tr>
</tbody>
</table>
<p>根据统计结果，每年三季度买股，持有到第二年一季度，并且小心第二年一月的回调，有很大的可能性取得正收益。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/11/MonthStat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/11/MonthStat/" itemprop="url">股市的按月回报统计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-11T08:30:45+08:00">
                2017-08-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>美国股市有所谓的五月效应，中国股市也有五穷六绝七翻身。我们可以通过历史数据验证是否存在月份效应。以下是在<a href="https://www.joinquant.com/" target="_blank" rel="external">聚宽</a>平台进行验证的代码。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> math</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> talib</div><div class="line"><span class="keyword">import</span> dateutil</div><div class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</div><div class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> *</div><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="keyword">from</span> kuanke.user_space_api <span class="keyword">import</span> *</div><div class="line"><span class="keyword">except</span>:</div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">from</span> jqdata <span class="keyword">import</span> *</div><div class="line"></div><div class="line">pd.set_option(<span class="string">'display.notebook_repr_html'</span>, <span class="keyword">False</span>)</div><div class="line">pd.set_option(<span class="string">'display.max_rows'</span>, <span class="number">9999</span>)</div><div class="line">pd.set_option(<span class="string">'precision'</span>, <span class="number">3</span>)</div><div class="line">pd.set_option(<span class="string">'display.float_format'</span>, <span class="string">'&#123;:.2f&#125;'</span>.format)</div><div class="line"></div><div class="line">indexes = [</div><div class="line">    <span class="string">'000001.XSHG'</span>,   <span class="comment">#上证指数</span></div><div class="line">    <span class="string">'399001.XSHE'</span>,   <span class="comment">#深成指</span></div><div class="line">    <span class="string">'399005.XSHE'</span>,   <span class="comment">#中小板指</span></div><div class="line">    <span class="string">'399102.XSHE'</span>,   <span class="comment">#创业板综合指数</span></div><div class="line">    <span class="string">'000905.XSHG'</span>,   <span class="comment">#中证500</span></div><div class="line">    <span class="string">'000015.XSHG'</span>,   <span class="comment">#红利指数</span></div><div class="line">    <span class="string">'399932.XSHE'</span>,   <span class="comment">#中证消费</span></div><div class="line">    <span class="string">'399933.XSHE'</span>,   <span class="comment">#中证医药</span></div><div class="line">    <span class="string">'399396.XSHE'</span>,   <span class="comment">#国证食品</span></div><div class="line">    <span class="string">'399610.XSHE'</span>,   <span class="comment">#TMT50</span></div><div class="line">]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_indexes_display_name</span><span class="params">(indexes)</span>:</span></div><div class="line">    all_indexes = get_all_securities([<span class="string">'index'</span>])</div><div class="line"></div><div class="line">    <span class="keyword">return</span> all_indexes.loc[indexes][<span class="string">'display_name'</span>]</div><div class="line"></div><div class="line">index_names = get_indexes_display_name(indexes)</div><div class="line">prices = get_price(indexes, count = <span class="number">4800</span>, end_date = <span class="string">'2017-8-11'</span>, fields=[<span class="string">'close'</span>])</div><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> indexes:</div><div class="line">    closes = prices[<span class="string">'close'</span>][index]</div><div class="line">    closes_monthly = closes.asfreq(<span class="string">'M'</span>, method=<span class="string">'ffill'</span>)</div><div class="line"></div><div class="line">    return_monthly = closes_monthly.pct_change() * <span class="number">100</span></div><div class="line">    return_monthly.dropna(inplace=<span class="keyword">True</span>)</div><div class="line"></div><div class="line">    monthly_stat = pd.DataFrame()</div><div class="line">    return_monthly_group = return_monthly.groupby([<span class="keyword">lambda</span> x: x.month])</div><div class="line">    return_monthly_stat = return_monthly_group.agg(</div><div class="line">         &#123;<span class="string">'count'</span>: <span class="string">'count'</span>, <span class="string">'min'</span>:<span class="string">'min'</span>,<span class="string">'max'</span>:<span class="string">'max'</span>, <span class="string">'mean'</span>:<span class="string">'mean'</span>, <span class="string">'positive'</span>: <span class="keyword">lambda</span> values: sum(x&gt;<span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> values)&#125;)</div><div class="line">    return_monthly_stat[<span class="string">'positive_pct'</span>] = return_monthly_stat[<span class="string">'positive'</span>] / return_monthly_stat[<span class="string">'count'</span>] * <span class="number">100</span></div><div class="line">    <span class="keyword">del</span> return_monthly_stat[<span class="string">'positive'</span>]</div><div class="line">    return_monthly_stat[<span class="string">'index'</span>] = index</div><div class="line">    return_monthly_stat[<span class="string">'index_name'</span>] = index_names[index]</div><div class="line"></div><div class="line">    return_monthly_stat.set_index([<span class="string">'index'</span>], append=<span class="keyword">True</span>, inplace=<span class="keyword">True</span>)</div><div class="line">    return_monthly_stat = return_monthly_stat[[<span class="string">'index_name'</span>, <span class="string">'count'</span>, <span class="string">'mean'</span>, <span class="string">'min'</span>, <span class="string">'max'</span>, <span class="string">'positive_pct'</span>]]</div><div class="line">    <span class="keyword">print</span> return_monthly_stat</div></pre></td></tr></table></figure></p>
<p>统计结果如下：</p>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>-1.70</td>
<td>-22.65</td>
<td>9.33</td>
<td>50.00</td>
</tr>
<tr>
<td>2</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>2.80</td>
<td>-1.81</td>
<td>9.58</td>
<td>76.92</td>
</tr>
<tr>
<td>3</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>0.64</td>
<td>-20.14</td>
<td>13.94</td>
<td>46.15</td>
</tr>
<tr>
<td>4</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>3.80</td>
<td>-7.67</td>
<td>20.64</td>
<td>46.15</td>
</tr>
<tr>
<td>5</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>0.26</td>
<td>-9.70</td>
<td>13.96</td>
<td>46.15</td>
</tr>
<tr>
<td>6</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>-3.24</td>
<td>-20.31</td>
<td>12.40</td>
<td>53.85</td>
</tr>
<tr>
<td>7</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>13</td>
<td>2.37</td>
<td>-14.34</td>
<td>17.02</td>
<td>69.23</td>
</tr>
<tr>
<td>8</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>-1.59</td>
<td>-21.81</td>
<td>16.73</td>
<td>58.33</td>
</tr>
<tr>
<td>9</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>0.71</td>
<td>-8.11</td>
<td>6.62</td>
<td>58.33</td>
</tr>
<tr>
<td>10</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>1.72</td>
<td>-24.63</td>
<td>12.17</td>
<td>66.67</td>
</tr>
<tr>
<td>11</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>1.47</td>
<td>-18.19</td>
<td>14.22</td>
<td>66.67</td>
</tr>
<tr>
<td>12</td>
<td>000001.XSHG</td>
<td>上证指数</td>
<td>12</td>
<td>5.29</td>
<td>-5.74</td>
<td>27.45</td>
<td>58.33</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>-0.95</td>
<td>-25.64</td>
<td>14.83</td>
<td>50.00</td>
</tr>
<tr>
<td>2</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>3.72</td>
<td>-3.41</td>
<td>10.86</td>
<td>69.23</td>
</tr>
<tr>
<td>3</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>1.21</td>
<td>-15.94</td>
<td>18.06</td>
<td>53.85</td>
</tr>
<tr>
<td>4</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>3.55</td>
<td>-10.66</td>
<td>27.10</td>
<td>53.85</td>
</tr>
<tr>
<td>5</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>1.03</td>
<td>-11.25</td>
<td>19.13</td>
<td>53.85</td>
</tr>
<tr>
<td>6</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>-3.15</td>
<td>-22.22</td>
<td>14.21</td>
<td>38.46</td>
</tr>
<tr>
<td>7</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>13</td>
<td>3.06</td>
<td>-13.70</td>
<td>21.15</td>
<td>53.85</td>
</tr>
<tr>
<td>8</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>-2.33</td>
<td>-22.57</td>
<td>17.58</td>
<td>50.00</td>
</tr>
<tr>
<td>9</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>0.39</td>
<td>-9.70</td>
<td>5.87</td>
<td>58.33</td>
</tr>
<tr>
<td>10</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>1.91</td>
<td>-22.75</td>
<td>16.56</td>
<td>66.67</td>
</tr>
<tr>
<td>11</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>1.90</td>
<td>-19.93</td>
<td>22.61</td>
<td>66.67</td>
</tr>
<tr>
<td>12</td>
<td>399001.XSHE</td>
<td>深证成指</td>
<td>12</td>
<td>4.99</td>
<td>-7.99</td>
<td>22.35</td>
<td>66.67</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>-2.07</td>
<td>-25.27</td>
<td>10.72</td>
<td>44.44</td>
</tr>
<tr>
<td>2</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>4.79</td>
<td>-4.38</td>
<td>12.00</td>
<td>77.78</td>
</tr>
<tr>
<td>3</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>4.12</td>
<td>-8.63</td>
<td>20.74</td>
<td>55.56</td>
</tr>
<tr>
<td>4</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>0.33</td>
<td>-5.43</td>
<td>9.63</td>
<td>33.33</td>
</tr>
<tr>
<td>5</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>3.69</td>
<td>-7.76</td>
<td>25.01</td>
<td>66.67</td>
</tr>
<tr>
<td>6</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>-2.18</td>
<td>-15.86</td>
<td>7.78</td>
<td>55.56</td>
</tr>
<tr>
<td>7</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>10</td>
<td>2.08</td>
<td>-9.71</td>
<td>12.60</td>
<td>70.00</td>
</tr>
<tr>
<td>8</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>-2.96</td>
<td>G -19.39</td>
<td>12.50</td>
<td>44.44</td>
</tr>
<tr>
<td>9</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>-0.13</td>
<td>-12.06</td>
<td>8.83</td>
<td>55.56</td>
</tr>
<tr>
<td>10</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>0.62</td>
<td>-22.46</td>
<td>14.99</td>
<td>55.56</td>
</tr>
<tr>
<td>11</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>2.59</td>
<td>-11.96</td>
<td>16.95</td>
<td>66.67</td>
</tr>
<tr>
<td>12</td>
<td>399005.XSHE</td>
<td>中小板指</td>
<td>9</td>
<td>0.88</td>
<td>-12.67</td>
<td>15.18</td>
<td>44.44</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>-2.99</td>
<td>-28.70</td>
<td>13.38</td>
<td>42.86</td>
</tr>
<tr>
<td>2</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>5.62</td>
<td>-5.71</td>
<td>14.28</td>
<td>71.43</td>
</tr>
<tr>
<td>3</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>2.68</td>
<td>-8.25</td>
<td>24.18</td>
<td>28.57</td>
</tr>
<tr>
<td>4</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>0.60</td>
<td>-9.34</td>
<td>19.47</td>
<td>42.86</td>
</tr>
<tr>
<td>5</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>7.70</td>
<td>-7.20</td>
<td>33.82</td>
<td>71.43</td>
</tr>
<tr>
<td>6</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>-0.97</td>
<td>-18.09</td>
<td>8.24</td>
<td>57.14</td>
</tr>
<tr>
<td>7</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>-2.06</td>
<td>-13.33</td>
<td>12.00</td>
<td>28.57</td>
</tr>
<tr>
<td>8</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>6</td>
<td>0.77</td>
<td>-19.59</td>
<td>6.84</td>
<td>83.33</td>
</tr>
<tr>
<td>9</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>-0.00</td>
<td>-14.41</td>
<td>12.94</td>
<td>42.86</td>
</tr>
<tr>
<td>10</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>4.80</td>
<td>-7.43</td>
<td>19.20</td>
<td>57.14</td>
</tr>
<tr>
<td>11</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>4.15</td>
<td>-12.31</td>
<td>13.48</td>
<td>71.43</td>
</tr>
<tr>
<td>12</td>
<td>399102.XSHE</td>
<td>创业板综合指数</td>
<td>7</td>
<td>-2.39</td>
<td>-12.90</td>
<td>18.49</td>
<td>28.57</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>-1.39</td>
<td>-28.20</td>
<td>15.40</td>
<td>50.00</td>
</tr>
<tr>
<td>2</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>6.98</td>
<td>-2.17</td>
<td>17.30</td>
<td>90.91</td>
</tr>
<tr>
<td>3</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>3.37</td>
<td>-20.04</td>
<td>20.57</td>
<td>45.45</td>
</tr>
<tr>
<td>4</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>3.63</td>
<td>-6.68</td>
<td>33.41</td>
<td>36.36</td>
</tr>
<tr>
<td>5</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>2.28</td>
<td>-8.12</td>
<td>17.68</td>
<td>54.55</td>
</tr>
<tr>
<td>6</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>-6.04</td>
<td>-25.08</td>
<td>5.39</td>
<td>45.45</td>
</tr>
<tr>
<td>7</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>11</td>
<td>5.04</td>
<td>-13.24</td>
<td>22.82</td>
<td>81.82</td>
</tr>
<tr>
<td>8</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>-2.46</td>
<td>-23.53</td>
<td>11.22</td>
<td>50.00</td>
</tr>
<tr>
<td>9</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>-0.12</td>
<td>-12.95</td>
<td>11.03</td>
<td>60.00</td>
</tr>
<tr>
<td>10</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>0.14</td>
<td>-26.87</td>
<td>15.70</td>
<td>60.00</td>
</tr>
<tr>
<td>11</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>2.72</td>
<td>-11.09</td>
<td>17.89</td>
<td>70.00</td>
</tr>
<tr>
<td>12</td>
<td>000905.XSHG</td>
<td>中证500</td>
<td>10</td>
<td>2.20</td>
<td>-14.48</td>
<td>20.00</td>
<td>60.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>0.43</td>
<td>-20.13</td>
<td>18.42</td>
<td>58.33</td>
</tr>
<tr>
<td>2</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>3.33</td>
<td>-1.91</td>
<td>9.51</td>
<td>84.62</td>
</tr>
<tr>
<td>3</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>0.51</td>
<td>-23.47</td>
<td>17.39</td>
<td>53.85</td>
</tr>
<tr>
<td>4</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>4.29</td>
<td>-8.54</td>
<td>30.91</td>
<td>53.85</td>
</tr>
<tr>
<td>5</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>0.27</td>
<td>-9.31</td>
<td>14.24</td>
<td>46.15</td>
</tr>
<tr>
<td>6</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>-4.51</td>
<td>-26.78</td>
<td>8.69</td>
<td>30.77</td>
</tr>
<tr>
<td>7</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>13</td>
<td>3.03</td>
<td>-15.23</td>
<td>25.39</td>
<td>61.54</td>
</tr>
<tr>
<td>8</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>-2.24</td>
<td>-23.80</td>
<td>19.54</td>
<td>41.67</td>
</tr>
<tr>
<td>9</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>0.70</td>
<td>-6.00</td>
<td>7.45</td>
<td>58.33</td>
</tr>
<tr>
<td>10</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>1.07</td>
<td>-28.61</td>
<td>13.39</td>
<td>66.67</td>
</tr>
<tr>
<td>11</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>2.16</td>
<td>-17.45</td>
<td>20.13</td>
<td>58.33</td>
</tr>
<tr>
<td>12</td>
<td>000015.XSHG</td>
<td>红利指数</td>
<td>12</td>
<td>5.39</td>
<td>-5.16</td>
<td>20.98</td>
<td>58.33</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>-4.45</td>
<td>-19.15</td>
<td>1.67</td>
<td>25.00</td>
</tr>
<tr>
<td>2</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>4.09</td>
<td>-0.68</td>
<td>11.97</td>
<td>87.50</td>
</tr>
<tr>
<td>3</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>2.06</td>
<td>-4.69</td>
<td>14.92</td>
<td>37.50</td>
</tr>
<tr>
<td>4</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>1.59</td>
<td>-3.60</td>
<td>14.44</td>
<td>50.00</td>
</tr>
<tr>
<td>5</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>1.74</td>
<td>-3.63</td>
<td>9.66</td>
<td>62.50</td>
</tr>
<tr>
<td>6</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>-1.19</td>
<td>-9.57</td>
<td>8.19</td>
<td>50.00</td>
</tr>
<tr>
<td>7</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>2.62</td>
<td>-11.04</td>
<td>10.76</td>
<td>75.00</td>
</tr>
<tr>
<td>8</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>-0.89</td>
<td>-9.67</td>
<td>11.58</td>
<td>50.00</td>
</tr>
<tr>
<td>9</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>0.22</td>
<td>-11.80</td>
<td>6.80</td>
<td>62.50</td>
</tr>
<tr>
<td>10</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>3.04</td>
<td>-3.58</td>
<td>10.96</td>
<td>62.50</td>
</tr>
<tr>
<td>11</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>2.60</td>
<td>-13.49</td>
<td>17.53</td>
<td>75.00</td>
</tr>
<tr>
<td>12</td>
<td>399932.XSHE</td>
<td>中证主要消费指数</td>
<td>8</td>
<td>0.17</td>
<td>-14.80</td>
<td>9.29</td>
<td>50.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>-2.44</td>
<td>-24.63</td>
<td>11.96</td>
<td>37.50</td>
</tr>
<tr>
<td>2</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>3.63</td>
<td>-2.68</td>
<td>9.60</td>
<td>87.50</td>
</tr>
<tr>
<td>3</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>1.73</td>
<td>-7.00</td>
<td>16.62</td>
<td>50.00</td>
</tr>
<tr>
<td>4</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>1.34</td>
<td>-4.17</td>
<td>14.86</td>
<td>37.50</td>
</tr>
<tr>
<td>5</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>3.51</td>
<td>-6.19</td>
<td>16.26</td>
<td>75.00</td>
</tr>
<tr>
<td>6</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>-2.40</td>
<td>-15.56</td>
<td>5.19</td>
<td>62.50</td>
</tr>
<tr>
<td>7</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>1.89</td>
<td>-9.23</td>
<td>9.56</td>
<td>62.50</td>
</tr>
<tr>
<td>8</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>-1.36</td>
<td>-12.55</td>
<td>11.40</td>
<td>25.00</td>
</tr>
<tr>
<td>9</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>1.77</td>
<td>-12.40</td>
<td>8.16</td>
<td>62.50</td>
</tr>
<tr>
<td>10</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>3.96</td>
<td>-7.04</td>
<td>12.99</td>
<td>87.50</td>
</tr>
<tr>
<td>11</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>1.76</td>
<td>-10.42</td>
<td>10.01</td>
<td>75.00</td>
</tr>
<tr>
<td>12</td>
<td>399933.XSHE</td>
<td>中证医药卫生指数</td>
<td>8</td>
<td>-0.69</td>
<td>-12.53</td>
<td>9.35</td>
<td>50.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>-5.77</td>
<td>-19.69</td>
<td>1.30</td>
<td>20.00</td>
</tr>
<tr>
<td>2</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>2.23</td>
<td>-1.41</td>
<td>4.34</td>
<td>80.00</td>
</tr>
<tr>
<td>3</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>5.38</td>
<td>-3.40</td>
<td>16.22</td>
<td>60.00</td>
</tr>
<tr>
<td>4</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>2.33</td>
<td>-3.89</td>
<td>15.11</td>
<td>60.00</td>
</tr>
<tr>
<td>5</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>3.25</td>
<td>-3.27</td>
<td>8.78</td>
<td>80.00</td>
</tr>
<tr>
<td>6</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>1.00</td>
<td>-8.59</td>
<td>7.95</td>
<td>40.00</td>
</tr>
<tr>
<td>7</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>0.78</td>
<td>-14.40</td>
<td>10.25</td>
<td>80.00</td>
</tr>
<tr>
<td>8</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>4</td>
<td>-2.08</td>
<td>-9.45</td>
<td>2.36</td>
<td>50.00</td>
</tr>
<tr>
<td>9</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>4</td>
<td>-0.44</td>
<td>-5.27</td>
<td>5.11</td>
<td>50.00</td>
</tr>
<tr>
<td>10</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>4</td>
<td>1.81</td>
<td>-4.91</td>
<td>9.82</td>
<td>50.00</td>
</tr>
<tr>
<td>11</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>-1.58</td>
<td>-15.80</td>
<td>3.21</td>
<td>60.00</td>
</tr>
<tr>
<td>12</td>
<td>399396.XSHE</td>
<td>国证食品</td>
<td>5</td>
<td>4.33</td>
<td>-3.35</td>
<td>11.76</td>
<td>60.00</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>month（月份）</th>
<th>index（指数）</th>
<th>index_name（指数名称）</th>
<th>count（样本数量）</th>
<th>mean（平均值）</th>
<th>min（最小值）</th>
<th>max（最大值）</th>
<th>positive_pct（上涨概率）</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>-1.83</td>
<td>-25.67</td>
<td>14.02</td>
<td>42.86</td>
</tr>
<tr>
<td>2</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>6.13</td>
<td>-6.01</td>
<td>14.03</td>
<td>71.43</td>
</tr>
<tr>
<td>3</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>2.66</td>
<td>-8.20</td>
<td>17.00</td>
<td>57.14</td>
</tr>
<tr>
<td>4</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>2.68</td>
<td>-4.79</td>
<td>20.57</td>
<td>42.86</td>
</tr>
<tr>
<td>5</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>5.28</td>
<td>-6.98</td>
<td>20.29</td>
<td>71.43</td>
</tr>
<tr>
<td>6</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>-2.11</td>
<td>-17.94</td>
<td>8.75</td>
<td>57.14</td>
</tr>
<tr>
<td>7</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>-1.70</td>
<td>-10.30</td>
<td>9.72</td>
<td>42.86</td>
</tr>
<tr>
<td>8</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>6</td>
<td>-1.56</td>
<td>-18.31</td>
<td>4.49</td>
<td>66.67</td>
</tr>
<tr>
<td>9</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>6</td>
<td>-0.67</td>
<td>-10.69</td>
<td>8.18</td>
<td>50.00</td>
</tr>
<tr>
<td>10</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>6</td>
<td>1.90</td>
<td>-7.96</td>
<td>17.94</td>
<td>50.00</td>
</tr>
<tr>
<td>11</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>6</td>
<td>-0.15</td>
<td>-9.76</td>
<td>7.17</td>
<td>66.67</td>
</tr>
<tr>
<td>12</td>
<td>399610.XSHE</td>
<td>TMT50</td>
<td>7</td>
<td>-1.02</td>
<td>-11.42</td>
<td>13.86</td>
<td>42.86</td>
</tr>
</tbody>
</table>
<p>统计结果中可以发现2月是全年中上涨概率最高并且回报平均值也较高的月份，此时满仓是比较好的选择。另外7月、10月、11月也是比较好的月份。相反1月、6月、8月的回报平均值为负，投资需谨慎。特别是6月，堪称中国股市的死亡之月，如果上半年已有较大的上涨，6月几乎必然有较大幅度的调整。古谚有云：五穷六绝七翻身。五月整体来看并没有特别危险，不过如果上半年已有较大涨幅，五月的中下旬就可能开始调整，并持续到六月。从统计数据上看，七翻身是没错的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/10/TradingSystem3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/10/TradingSystem3/" itemprop="url">从零构建股票交易系统 - 优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-10T20:59:45+08:00">
                2017-08-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在上一篇中我们创建了一个PB轮动的策略，但是策略收益差强人意。这一篇我们对这个策略进行优化，以提高收益。</p>
<h2 id="优化股票池"><a href="#优化股票池" class="headerlink" title="优化股票池"></a>优化股票池</h2><p>查看回测结果，可以发现单一的低PB因子选择的大部分是钢铁股。而钢铁股这种强周期股几年才有一次行情。所以策略大部分时间跑输基准也不奇怪了。</p>
<p>我们再加入一个因子，同比营业利润增长率。把选股的代码修改为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">fundamentals = get_fundamentals(query(valuation.code, valuation.pb_ratio</div><div class="line">                ).filter(</div><div class="line">                    valuation.pb_ratio &gt; <span class="number">0</span>,</div><div class="line">                    valuation.pb_ratio &lt; <span class="number">3</span>,</div><div class="line">                    indicator.inc_operation_profit_year_on_year &gt; <span class="number">15</span></div><div class="line">                ), context.previous_date)</div><div class="line">    fundamentals = fundamentals.set_index([<span class="string">'code'</span>])</div></pre></td></tr></table></figure>
<p>我们加入一个条件：同比营业利润增长率大于15%。这样策略就会将便宜（低PB）并且绩优（同比营业利润增长）的股票加入股票池，而不是仅仅选取便宜的股票。回测的结果如下：<br><img src="/uploads/2017081002.png" alt=""></p>
<p>仅仅加入一个因子就将收益提高了3倍，总收益从74.11%提高到216.91%，年化收益从7.7%提高到16.90%。并且几乎所有时间都是跑盈基准的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/09/TradingSystem2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="长毛大好">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="长毛大好的根据地">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/09/TradingSystem2/" itemprop="url">从零构建股票交易系统 - 交易</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-09T21:03:41+08:00">
                2017-08-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>根据基本面数据分析的结果，PB是一个影响股票价格的效果显著的因子。我们可以使用这个因子开发一个PB轮动的单因子交易系统。</p>
<h2 id="PB轮动交易系统"><a href="#PB轮动交易系统" class="headerlink" title="PB轮动交易系统"></a>PB轮动交易系统</h2><p>在<a href="https://www.joinquant.com" target="_blank" rel="external">聚宽</a>中创建一个交易策略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 导入函数库</span></div><div class="line"><span class="keyword">import</span> jqdata</div><div class="line"></div><div class="line"><span class="comment"># 初始化函数，设定基准等等</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(context)</span>:</span></div><div class="line">    set_params(context)    <span class="comment">#1 设置策参数</span></div><div class="line"></div><div class="line">    <span class="comment"># 设定沪深300作为基准</span></div><div class="line">    set_benchmark(<span class="string">'000300.XSHG'</span>)</div><div class="line">    <span class="comment"># 开启动态复权模式(真实价格)</span></div><div class="line">    set_option(<span class="string">'use_real_price'</span>, <span class="keyword">True</span>)</div><div class="line">    <span class="comment"># 输出内容到日志 log.info()</span></div><div class="line">    log.info(<span class="string">'初始函数开始运行且全局只运行一次'</span>)</div><div class="line">    <span class="comment"># 过滤掉order系列API产生的比error级别低的log</span></div><div class="line">    <span class="comment"># log.set_level('order', 'error')</span></div><div class="line"></div><div class="line">    <span class="comment">### 股票相关设定 ###</span></div><div class="line">    <span class="comment"># 股票类每笔交易时的手续费是：买入时佣金万分之三，卖出时佣金万分之三加千分之一印花税, 每笔交易佣金最低扣5块钱</span></div><div class="line">    set_order_cost(OrderCost(close_tax=<span class="number">0.001</span>, open_commission=<span class="number">0.0003</span>, close_commission=<span class="number">0.0003</span>, min_commission=<span class="number">5</span>), type=<span class="string">'stock'</span>)</div><div class="line"></div><div class="line">    <span class="comment">## 运行函数（reference_security为运行时间的参考标的；传入的标的只做种类区分，因此传入'000300.XSHG'或'510300.XSHG'是一样的）</span></div><div class="line">      <span class="comment"># 开盘前运行</span></div><div class="line">    run_daily(before_market_open, time=<span class="string">'before_open'</span>, reference_security=<span class="string">'000300.XSHG'</span>)</div><div class="line">      <span class="comment"># 开盘时运行</span></div><div class="line">    run_daily(market_open, time=<span class="string">'open'</span>, reference_security=<span class="string">'000300.XSHG'</span>)</div><div class="line">      <span class="comment"># 收盘后运行</span></div><div class="line">    run_daily(after_market_close, time=<span class="string">'after_close'</span>, reference_security=<span class="string">'000300.XSHG'</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_params</span><span class="params">(context)</span>:</span></div><div class="line">    g.trade_interval = <span class="number">21</span>   <span class="comment"># 轮动周期</span></div><div class="line">    g.stocks_to_buy = <span class="number">10</span>    <span class="comment"># 买入股票数量</span></div><div class="line">    g.counter = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="comment">## 开盘前运行函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">before_market_open</span><span class="params">(context)</span>:</span></div><div class="line">    g.counter = g.counter + <span class="number">1</span></div><div class="line">    <span class="keyword">if</span> g.counter % g.trade_interval != <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    fundamentals = get_fundamentals(query(valuation.code, valuation.pb_ratio</div><div class="line">                ).filter(</div><div class="line">                    valuation.pb_ratio &gt; <span class="number">0</span>,</div><div class="line">                    valuation.pb_ratio &lt; <span class="number">3</span></div><div class="line">                ), context.previous_date)</div><div class="line">    fundamentals = fundamentals.set_index([<span class="string">'code'</span>])</div><div class="line"></div><div class="line">    <span class="comment"># 要操作的股票：</span></div><div class="line">    g.stocks = list(fundamentals.sort(<span class="string">"pb_ratio"</span>, ascending = <span class="keyword">True</span>).index)[:g.stocks_to_buy]</div><div class="line"></div><div class="line"><span class="comment">## 开盘时运行函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">market_open</span><span class="params">(context)</span>:</span></div><div class="line">    <span class="keyword">if</span> g.counter % g.trade_interval != <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    every_stock_amount = context.portfolio.total_value / g.stocks_to_buy</div><div class="line"></div><div class="line">    <span class="keyword">if</span> len(list(context.portfolio.positions.keys()))==<span class="number">0</span>:</div><div class="line">        <span class="keyword">if</span> len(g.stocks):</div><div class="line">            <span class="keyword">for</span> stock <span class="keyword">in</span> g.stocks:</div><div class="line">                order_target_value(stock, every_stock_amount)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">for</span> stock <span class="keyword">in</span> context.portfolio.positions.keys():</div><div class="line">            <span class="keyword">if</span> stock <span class="keyword">not</span> <span class="keyword">in</span> g.stocks:</div><div class="line">                order_target_value(stock, <span class="number">0</span>)</div><div class="line"></div><div class="line">        <span class="keyword">if</span> len(g.stocks):</div><div class="line">            <span class="keyword">for</span> stock <span class="keyword">in</span> g.stocks:</div><div class="line">                order_target_value(stock, every_stock_amount)</div><div class="line"></div><div class="line"><span class="comment">## 收盘后运行函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">after_market_close</span><span class="params">(context)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>上面的策略是买入市盈率最低的十只股票，每21天轮动一次。也就是每21天检测市盈率，卖出不符合条件的股票，买入符合条件的股票。</p>
<p>策略回测的结果如下：<br><img src="/uploads/2017081001.png" alt=""></p>
<p>策略从2010-1-1至2017-8-9收益74.11%，年化收益7.7%。并且有2015年以前都是跑输基准的。这个结果只能说是差强人意。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="长毛大好" />
          <p class="site-author-name" itemprop="name">长毛大好</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.joinquant.com/" title="聚宽" target="_blank">聚宽</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="2017/09/06/Month/" title="月历" target="_blank">月历</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">长毛大好</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Gemini
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  
    

    
  





  






  





  

  

  

  

  

  

</body>
</html>
